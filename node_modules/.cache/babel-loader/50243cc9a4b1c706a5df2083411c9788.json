{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhin\\\\remixclient\\\\src\\\\components\\\\driverLogin\\\\DriverLogin.js\";\nimport React, { useState } from 'react';\nimport Web3 from \"web3\";\nimport { ContractABI } from \"../../ContractABI\";\nimport firebase from '../../firebase';\nimport './DriverLogin.css';\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\nconst RemixContract = new web3.eth.Contract(ContractABI, \"0xf4174c6E0c0d94BA2B623f6cCf877D6a06A7F994\");\n\nfunction DriverLogin() {\n  const [cnum, _setcnum] = useState(\"\");\n  var cnumError = \"\";\n\n  const validate = async e => {\n    if (!cnum) {\n      cnumError = \"Car Number cannot be blank\";\n    } else if (cnum !== \"\") {\n      var regex = /^([A-Z|a-z]{2}\\s{1}\\d{2}\\s{1}[A-Z|a-z]{1,2}\\s{1}\\d{1,4})?([A-Z|a-z]{3}\\s{1}\\d{1,4})?$/; // mh 12 bj 1780|||mmx 1234\n\n      var matchArray = cnum.match(regex);\n\n      if (matchArray == null) {\n        cnumError = \"Car Number is not valid\";\n      }\n    }\n\n    document.getElementById('label1').innerHTML = cnumError;\n\n    if (cnumError) {\n      //alert(\"in\")\n      return false;\n    } //alert(\"out\")\n\n\n    return true;\n  };\n\n  const setData = async e => {\n    e.preventDefault();\n    const isValid = await validate();\n\n    if (isValid) {\n      const accounts = await web3.eth.getAccounts();\n      const account = accounts[0];\n      alert(cnum);\n      const gas = await RemixContract.methods.getIndexFromCarNumber(cnum).estimateGas();\n      const result = await RemixContract.methods.getIndexFromCarNumber(cnum).send({\n        from: account,\n        gas\n      });\n      var x = (await RemixContract.methods.DriverLoginmessage().call()).toString();\n      alert(x);\n\n      if (x == \"Does not exists.\") {\n        const gas2 = await RemixContract.methods.makeDriverLoginmessageNULL().estimateGas();\n        await RemixContract.methods.makeDriverLoginmessageNULL().send({\n          from: account,\n          gas2\n        });\n      } else {\n        var index = (await RemixContract.methods.DriverLoginindex().call()).toString();\n        alert(index);\n        const gas1 = await RemixContract.methods.getDriverMobileFromIndex(index).estimateGas();\n        const result1 = await RemixContract.methods.getDriverMobileFromIndex(index).send({\n          from: account,\n          gas1\n        });\n        var mobile = (await RemixContract.methods.DriverLoginmobile().call()).toString();\n        alert(mobile);\n        var recaptcha = new firebase.auth.RecaptchaVerifier('recaptcha');\n        var number = '+91' + mobile;\n        alert(number);\n        const gas2 = await RemixContract.methods.makeDriverLoginmessageNULL().estimateGas();\n        await RemixContract.methods.makeDriverLoginmessageNULL().send({\n          from: account,\n          gas2\n        });\n        const gas4 = await RemixContract.methods.makeDriverLoginindexNULL().estimateGas();\n        await RemixContract.methods.makeDriverLoginindexNULL().send({\n          from: account,\n          gas4\n        });\n        const gas5 = await RemixContract.methods.makeDriverLoginmobileNULL().estimateGas();\n        await RemixContract.methods.makeDriverLoginmobileNULL().send({\n          from: account,\n          gas5\n        });\n        /*await firebase.auth().signInWithPhoneNumber(number, recaptcha).then( function(e) {\n        var code = prompt('Enter the otp', '');\n        if(code === null) \n        {\n          document.getElementById('label2').innerHTML = \"NULL OTP\";\n          window.location.reload();\n        }\n         \n         e.confirm(code).then(function (result) {\n             console.log(result.user);\n             document.getElementById('label2').innerHTML = \"Number verified\";\n             window.location.replace(\"/driverAcc/\"+index+\"/\"+cnum);\n         }).catch(function (error) {\n          document.getElementById('label2').innerHTML = \"Wrong OTP Entered\";\n             console.error( error);\n             window.location.reload();\n         });\n            })\n          .catch(function (error) {\n          document.getElementById('label2').innerHTML = \"Too many requests for Firebase OTP Verification\";\n          console.error( error);\n          window.location.reload();\n        });*/\n\n        window.location.replace(\"/driverAcc/\" + index + \"/\" + cnum);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    id: \"maind\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    id: \"icard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"logo\",\n    src: \"/img/car-parking.png\",\n    alt: \"Card image cap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: setData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"CAR NUMBER\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"mobile\",\n    name: \"cnum\",\n    value: cnum,\n    placeholder: \"Car Number\",\n    onChange: e => _setcnum(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"font\", {\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    id: \"label1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 31\n    }\n  }, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    id: \"mobileHelp\",\n    class: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, \"We'll never share your number with anyone else.\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Login\",\n    class: \"btn btn-dark btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"recaptcha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"font\", {\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    id: \"label2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 27\n    }\n  }, \" \")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  })))));\n}\n\nexport default DriverLogin;","map":{"version":3,"sources":["C:/Users/abhin/remixclient/src/components/driverLogin/DriverLogin.js"],"names":["React","useState","Web3","ContractABI","firebase","web3","providers","HttpProvider","eth","defaultAccount","accounts","RemixContract","Contract","DriverLogin","cnum","_setcnum","cnumError","validate","e","regex","matchArray","match","document","getElementById","innerHTML","setData","preventDefault","isValid","getAccounts","account","alert","gas","methods","getIndexFromCarNumber","estimateGas","result","send","from","x","DriverLoginmessage","call","toString","gas2","makeDriverLoginmessageNULL","index","DriverLoginindex","gas1","getDriverMobileFromIndex","result1","mobile","DriverLoginmobile","recaptcha","auth","RecaptchaVerifier","number","gas4","makeDriverLoginindexNULL","gas5","makeDriverLoginmobileNULL","window","location","replace","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAO,mBAAP;AAEA,MAAMC,IAAI,GAAG,IAAIH,IAAJ,CAAS,IAAIA,IAAI,CAACI,SAAL,CAAeC,YAAnB,CAAgC,uBAAhC,CAAT,CAAb;AACAF,IAAI,CAACG,GAAL,CAASC,cAAT,GAA0BJ,IAAI,CAACG,GAAL,CAASE,QAAT,CAAkB,CAAlB,CAA1B;AAEA,MAAMC,aAAa,GAAG,IAAIN,IAAI,CAACG,GAAL,CAASI,QAAb,CACpBT,WADoB,EAEpB,4CAFoB,CAAtB;;AAMA,SAASU,WAAT,GAAuB;AACrB,QAAM,CAACC,IAAD,EAAMC,QAAN,IAAiBd,QAAQ,CAAC,EAAD,CAA/B;AACA,MAAIe,SAAS,GAAC,EAAd;;AACA,QAAMC,QAAQ,GAAG,MAAMC,CAAN,IAAU;AACzB,QAAG,CAACJ,IAAJ,EACA;AACIE,MAAAA,SAAS,GAAC,4BAAV;AACH,KAHD,MAIK,IAAGF,IAAI,KAAI,EAAX,EACL;AACE,UAAIK,KAAK,GAAI,uFAAb,CADF,CAEE;;AACA,UAAIC,UAAU,GAAGN,IAAI,CAACO,KAAL,CAAWF,KAAX,CAAjB;;AACA,UAAIC,UAAU,IAAI,IAAlB,EAAwB;AACpBJ,QAAAA,SAAS,GAAC,yBAAV;AACH;AACF;;AACDM,IAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA8CR,SAA9C;;AACA,QAAIA,SAAJ,EAAe;AACb;AACA,aAAO,KAAP;AACD,KAlBwB,CAmBzB;;;AACA,WAAO,IAAP;AACD,GArBD;;AAsBA,QAAMS,OAAO,GAAG,MAAMP,CAAN,IAAW;AACzBA,IAAAA,CAAC,CAACQ,cAAF;AACA,UAAMC,OAAO,GAAG,MAAMV,QAAQ,EAA9B;;AACA,QAAIU,OAAJ,EACF;AACE,YAAMjB,QAAQ,GAAC,MAAML,IAAI,CAACG,GAAL,CAASoB,WAAT,EAArB;AACE,YAAMC,OAAO,GAAGnB,QAAQ,CAAC,CAAD,CAAxB;AACAoB,MAAAA,KAAK,CAAChB,IAAD,CAAL;AACA,YAAMiB,GAAG,GAAG,MAAMpB,aAAa,CAACqB,OAAd,CAAsBC,qBAAtB,CAA4CnB,IAA5C,EAAkDoB,WAAlD,EAAlB;AACA,YAAMC,MAAM,GAAG,MAAMxB,aAAa,CAACqB,OAAd,CACpBC,qBADoB,CACEnB,IADF,EAEpBsB,IAFoB,CAEf;AAAEC,QAAAA,IAAI,EAAER,OAAR;AAAiBE,QAAAA;AAAjB,OAFe,CAArB;AAGA,UAAIO,CAAC,GAAG,CAAC,MAAM3B,aAAa,CAACqB,OAAd,CAAsBO,kBAAtB,GAA2CC,IAA3C,EAAP,EAA0DC,QAA1D,EAAR;AACAX,MAAAA,KAAK,CAACQ,CAAD,CAAL;;AACA,UAAGA,CAAC,IAAE,kBAAN,EACA;AACE,cAAMI,IAAI,GAAG,MAAM/B,aAAa,CAACqB,OAAd,CAAsBW,0BAAtB,GAAmDT,WAAnD,EAAnB;AACA,cAAMvB,aAAa,CAACqB,OAAd,CAAsBW,0BAAtB,GAAmDP,IAAnD,CAAwD;AAAEC,UAAAA,IAAI,EAAER,OAAR;AAAiBa,UAAAA;AAAjB,SAAxD,CAAN;AACD,OAJD,MAMA;AACE,YAAIE,KAAK,GAAG,CAAC,MAAMjC,aAAa,CAACqB,OAAd,CAAsBa,gBAAtB,GAAyCL,IAAzC,EAAP,EAAwDC,QAAxD,EAAZ;AACAX,QAAAA,KAAK,CAACc,KAAD,CAAL;AACA,cAAME,IAAI,GAAG,MAAMnC,aAAa,CAACqB,OAAd,CAAsBe,wBAAtB,CAA+CH,KAA/C,EAAsDV,WAAtD,EAAnB;AACA,cAAMc,OAAO,GAAG,MAAMrC,aAAa,CAACqB,OAAd,CACrBe,wBADqB,CACIH,KADJ,EAErBR,IAFqB,CAEhB;AAAEC,UAAAA,IAAI,EAAER,OAAR;AAAiBiB,UAAAA;AAAjB,SAFgB,CAAtB;AAGA,YAAIG,MAAM,GAAG,CAAC,MAAMtC,aAAa,CAACqB,OAAd,CAAsBkB,iBAAtB,GAA0CV,IAA1C,EAAP,EAAyDC,QAAzD,EAAb;AACAX,QAAAA,KAAK,CAACmB,MAAD,CAAL;AACF,YAAIE,SAAS,GAAG,IAAI/C,QAAQ,CAACgD,IAAT,CAAcC,iBAAlB,CAAoC,WAApC,CAAhB;AACA,YAAIC,MAAM,GAAG,QAAML,MAAnB;AACAnB,QAAAA,KAAK,CAACwB,MAAD,CAAL;AACA,cAAMZ,IAAI,GAAG,MAAM/B,aAAa,CAACqB,OAAd,CAAsBW,0BAAtB,GAAmDT,WAAnD,EAAnB;AACA,cAAMvB,aAAa,CAACqB,OAAd,CAAsBW,0BAAtB,GAAmDP,IAAnD,CAAwD;AAAEC,UAAAA,IAAI,EAAER,OAAR;AAAiBa,UAAAA;AAAjB,SAAxD,CAAN;AACA,cAAMa,IAAI,GAAG,MAAM5C,aAAa,CAACqB,OAAd,CAAsBwB,wBAAtB,GAAiDtB,WAAjD,EAAnB;AACA,cAAMvB,aAAa,CAACqB,OAAd,CAAsBwB,wBAAtB,GAAiDpB,IAAjD,CAAsD;AAAEC,UAAAA,IAAI,EAAER,OAAR;AAAiB0B,UAAAA;AAAjB,SAAtD,CAAN;AACA,cAAME,IAAI,GAAG,MAAM9C,aAAa,CAACqB,OAAd,CAAsB0B,yBAAtB,GAAkDxB,WAAlD,EAAnB;AACA,cAAMvB,aAAa,CAACqB,OAAd,CAAsB0B,yBAAtB,GAAkDtB,IAAlD,CAAuD;AAAEC,UAAAA,IAAI,EAAER,OAAR;AAAiB4B,UAAAA;AAAjB,SAAvD,CAAN;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAwBHE,QAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,gBAAcjB,KAAd,GAAoB,GAApB,GAAwB9B,IAAhD;AACI;AACJ;AACF,GAjEC;;AAkEA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEA;AAAK,IAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAC,WAAX;AAAuB,IAAA,EAAE,EAAC,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAsB,IAAA,EAAE,EAAC,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAsB,IAAA,GAAG,EAAC,sBAA1B;AAAiD,IAAA,GAAG,EAAC,gBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE;AAAK,IAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAEW,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCACA;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,KAAK,EAAC,cAAzB;AAAwC,IAAA,EAAE,EAAC,QAA3C;AAAoD,IAAA,IAAI,EAAC,MAAzD;AAAgE,IAAA,KAAK,EAAEX,IAAvE;AAA6E,IAAA,WAAW,EAAE,YAA1F;AAAuG,IAAA,QAAQ,EAAEI,CAAC,IAAIH,QAAQ,CAACG,CAAC,CAAC4C,MAAF,CAASC,KAAV,CAA9H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADF,eAIE;AAAM,IAAA,KAAK,EAAC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAkB;AAAO,IAAA,EAAE,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAlB,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAME;AAAO,IAAA,EAAE,EAAC,YAAV;AAAuB,IAAA,KAAK,EAAC,sBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDANF,CADF,eASE;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,KAAK,EAAC,OAA3B;AAAmC,IAAA,KAAK,EAAC,wBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CADF,eAYC;AAAK,IAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZD,eAaE;AAAM,IAAA,KAAK,EAAC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAkB;AAAO,IAAA,EAAE,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAlB,CAbF,CAJF,CAFF,eAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBF,eAuBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAvBF,CADF,CAFA,CAFI,CADF;AAqCD;;AAED,eAAelD,WAAf","sourcesContent":["import React, { useState } from 'react';\nimport Web3 from \"web3\";\nimport { ContractABI } from \"../../ContractABI\";\nimport firebase from '../../firebase'\nimport './DriverLogin.css'\n\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\n\nconst RemixContract = new web3.eth.Contract(\n  ContractABI,\n  \"0xf4174c6E0c0d94BA2B623f6cCf877D6a06A7F994\"\n);\n\n\nfunction DriverLogin() {\n  const [cnum,_setcnum]= useState(\"\");\n  var cnumError=\"\";\n  const validate = async e =>{\n    if(!cnum)\n    {\n        cnumError=\"Car Number cannot be blank\";\n    }\n    else if(cnum!== \"\")\n    {\n      var regex = \t/^([A-Z|a-z]{2}\\s{1}\\d{2}\\s{1}[A-Z|a-z]{1,2}\\s{1}\\d{1,4})?([A-Z|a-z]{3}\\s{1}\\d{1,4})?$/;\n      // mh 12 bj 1780|||mmx 1234\n      var matchArray = cnum.match(regex);\n      if (matchArray == null) {\n          cnumError=\"Car Number is not valid\";\n      }\n    }\n    document.getElementById('label1').innerHTML = cnumError;\n    if (cnumError) {\n      //alert(\"in\")\n      return false;\n    }\n    //alert(\"out\")\n    return true;\n  }\n  const setData = async e => {\n    e.preventDefault();\n    const isValid = await validate();\n    if (isValid)\n  {\n    const accounts=await web3.eth.getAccounts();\n      const account = accounts[0];\n      alert(cnum);\n      const gas = await RemixContract.methods.getIndexFromCarNumber(cnum).estimateGas();\n      const result = await RemixContract.methods\n      .getIndexFromCarNumber(cnum)\n      .send({ from: account, gas });\n      var x=  (await RemixContract.methods.DriverLoginmessage().call()).toString();\n      alert(x);\n      if(x==\"Does not exists.\")\n      {\n        const gas2 = await RemixContract.methods.makeDriverLoginmessageNULL().estimateGas();\n        await RemixContract.methods.makeDriverLoginmessageNULL().send({ from: account, gas2 });\n      }\n      else\n      {\n        var index=  (await RemixContract.methods.DriverLoginindex().call()).toString();\n        alert(index);\n        const gas1 = await RemixContract.methods.getDriverMobileFromIndex(index).estimateGas();\n        const result1 = await RemixContract.methods\n        .getDriverMobileFromIndex(index)\n        .send({ from: account, gas1 });\n        var mobile=  (await RemixContract.methods.DriverLoginmobile().call()).toString();\n        alert(mobile);\n      var recaptcha = new firebase.auth.RecaptchaVerifier('recaptcha');\n      var number = '+91'+mobile;\n      alert(number)\n      const gas2 = await RemixContract.methods.makeDriverLoginmessageNULL().estimateGas();\n      await RemixContract.methods.makeDriverLoginmessageNULL().send({ from: account, gas2 });\n      const gas4 = await RemixContract.methods.makeDriverLoginindexNULL().estimateGas();\n      await RemixContract.methods.makeDriverLoginindexNULL().send({ from: account, gas4 });\n      const gas5 = await RemixContract.methods.makeDriverLoginmobileNULL().estimateGas();\n      await RemixContract.methods.makeDriverLoginmobileNULL().send({ from: account, gas5 });\n      /*await firebase.auth().signInWithPhoneNumber(number, recaptcha).then( function(e) {\n      var code = prompt('Enter the otp', '');\n      if(code === null) \n      {\n        document.getElementById('label2').innerHTML = \"NULL OTP\";\n        window.location.reload();\n      }\n       \n       e.confirm(code).then(function (result) {\n           console.log(result.user);\n           document.getElementById('label2').innerHTML = \"Number verified\";\n           window.location.replace(\"/driverAcc/\"+index+\"/\"+cnum);\n       }).catch(function (error) {\n        document.getElementById('label2').innerHTML = \"Wrong OTP Entered\";\n           console.error( error);\n           window.location.reload();\n       });\n \n        })\n        .catch(function (error) {\n        document.getElementById('label2').innerHTML = \"Too many requests for Firebase OTP Verification\";\n        console.error( error);\n        window.location.reload();\n   });*/\n   window.location.replace(\"/driverAcc/\"+index+\"/\"+cnum);\n      }\n  }\n}\n  return (\n    <div>\n\n<div>\n\n<div class=\"card\" >\n  <div class=\"card-body\" id=\"maind\">\n    <br/>\n    <div className=\"card\" id=\"icard\">\n      <br/>  \n      <img className=\"logo\" src=\"/img/car-parking.png\" alt=\"Card image cap\"/>\n      <br/>\n      <div class=\"card-body\">\n        <form onSubmit={setData}>\n          <div class=\"form-group\">\n            <label>CAR NUMBER\n            <input type=\"text\" class=\"form-control\" id=\"mobile\" name=\"cnum\" value={cnum} placeholder= \"Car Number\" onChange={e => _setcnum(e.target.value)}/>\n            </label>\n            <font color=\"red\"><label id='label1'> </label></font>\n            <br></br>\n            <small id=\"mobileHelp\" class=\"form-text text-muted\">We'll never share your number with anyone else.</small>\n          </div>\n          <input type=\"submit\" value=\"Login\" class=\"btn btn-dark btn-block\"/>\n       </form>\n       <div id=\"recaptcha\"></div>\n        <font color=\"red\"><label id='label2'> </label></font>\n      </div>\n    </div>\n    <br/>\n    <br/>\n  </div>\n</div>\n\n</div>\n\n    </div>\n  );\n}\n\nexport default DriverLogin\n"]},"metadata":{},"sourceType":"module"}