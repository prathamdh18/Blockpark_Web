{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhin\\\\remixclient\\\\src\\\\components\\\\ownerLogin\\\\OwnerLogin.js\";\nimport React, { useState } from 'react';\nimport Web3 from \"web3\";\nimport { ContractABI } from \"../../ContractABI\";\nimport firebase from '../../firebase';\nimport './OwnerLogin.css';\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\nconst RemixContract = new web3.eth.Contract(ContractABI, \"0xfbC8234649887617be2Cdf552a444193eE010A3c\");\n\nfunction OwnerLogin() {\n  const [PAN, _setPAN] = useState(\"\");\n  var PANError = \"\";\n\n  const validate = async e => {\n    if (!PAN) {\n      PANError = \"pan cannot be blank\";\n    } else if (PAN !== \"\") {\n      var regex = /([A-Z]){5}([0-9]){4}([A-Z]){1}$/;\n      var matchArray = PAN.match(regex);\n\n      if (matchArray == null) {\n        PANError = \"pan number is not valid\";\n      }\n    }\n\n    document.getElementById('label1').innerHTML = PANError;\n\n    if (PANError) {\n      //alert(\"in\")\n      return false;\n    } //alert(\"out\")\n\n\n    return true;\n  };\n\n  const setData = async e => {\n    e.preventDefault();\n    const isValid = await validate();\n\n    if (isValid) {\n      const accounts = await web3.eth.getAccounts();\n      const account = accounts[0];\n      const gas = await RemixContract.methods.getIndexFromPAN(PAN).estimateGas();\n      const result = await RemixContract.methods.getIndexFromPAN(PAN).send({\n        from: account,\n        gas\n      });\n      var x = (await RemixContract.methods.LotOwnerLoginmessage().call()).toString();\n\n      if (x == \"Does not exists.\") {\n        const gas2 = await RemixContract.methods.makeLotOwnerLoginmessageNULL().estimateGas();\n        await RemixContract.methods.makeLotOwnerLoginmessageNULL().send({\n          from: account,\n          gas2\n        });\n      } else {\n        var index = (await RemixContract.methods.LotOwnerLoginindex().call()).toString(); //alert(index)\n\n        const gas1 = await RemixContract.methods.getOwnerMobileFromIndex(index).estimateGas();\n        const result1 = await RemixContract.methods.getOwnerMobileFromIndex(index).send({\n          from: account,\n          gas1\n        });\n        var mobile = (await RemixContract.methods.LotOwnerLoginmobile().call()).toString();\n        alert(mobile);\n        var name = (await RemixContract.methods.getOwnerNameFromIndex(index).call()).toString(); //alert(name);\n\n        var slots = (await RemixContract.methods.getOwnerslotsFromIndex(index).call()).toString(); //alert(slots);\n\n        var price = (await RemixContract.methods.getOwnersPriceFromIndex(index).call()).toString(); //alert(price);\n\n        var distance = (await RemixContract.methods.getOwnersDistanceFromIndex(index).call()).toString(); //alert(distance);\n\n        var rating = (await RemixContract.methods.getOwnersSecurityFromIndex(index).call()).toString(); //alert(rating);\n\n        var balance = (await RemixContract.methods.getOwnersBalanceFromIndex(index).call()).toString(); //alert(balance);\n\n        var phone = (await RemixContract.methods.getOwnersMobileFromIndex(index).call()).toString(); //alert(phone)\n\n        var recaptcha = new firebase.auth.RecaptchaVerifier('recaptcha');\n        var number = '+91' + mobile; //alert(number)\n\n        const gas2 = await RemixContract.methods.makeLotOwnerLoginmessageNULL().estimateGas();\n        await RemixContract.methods.makeLotOwnerLoginmessageNULL().send({\n          from: account,\n          gas2\n        });\n        const gas4 = await RemixContract.methods.makeLotOwnerLoginindexNULL().estimateGas();\n        await RemixContract.methods.makeLotOwnerLoginindexNULL().send({\n          from: account,\n          gas4\n        });\n        const gas5 = await RemixContract.methods.makeLotOwnerLoginmobileNULL().estimateGas();\n        await RemixContract.methods.makeLotOwnerLoginmobileNULL().send({\n          from: account,\n          gas5\n        }); //window.location.replace(\"/Owneracc/\"+PAN+\"/\"+name+\"/\"+slots+\"/\"+price+\"/\"+distance+\"/\"+rating+\"/\"+balance+\"/\"+phone);\n\n        await firebase.auth().signInWithPhoneNumber(number, recaptcha).then(function (e) {\n          var code = prompt('Enter the otp', '');\n\n          if (code === null) {\n            document.getElementById('label2').innerHTML = \"NULL OTP\";\n            window.location.reload();\n          }\n\n          e.confirm(code).then(function (result) {\n            console.log(result.user);\n            document.getElementById('label2').innerHTML = \"Number verified\";\n            window.location.replace(\"/Owneracc/\" + PAN + \"/\" + name + \"/\" + slots + \"/\" + price + \"/\" + distance + \"/\" + rating + \"/\" + balance + \"/\" + phone);\n          }).catch(function (error) {\n            document.getElementById('label2').innerHTML = \"Wrong OTP Entered\";\n            console.error(error);\n            window.location.reload();\n          });\n        }).catch(function (error) {\n          document.getElementById('label2').innerHTML = \"Too many requests for Firebase OTP Verification\";\n          console.error(error);\n          window.location.reload();\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    id: \"mainc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    id: \"icard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"logo\",\n    src: \"/img/car-parking.png\",\n    alt: \"Card image cap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: setData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, \"PAN\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"mobile\",\n    name: \"PAN\",\n    value: PAN,\n    placeholder: \"PAN card number\",\n    onChange: e => _setPAN(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"font\", {\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    id: \"label1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 39\n    }\n  }, \" \")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    id: \"mobileHelp\",\n    class: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, \"We'll never share your number with anyone else.\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Login\",\n    class: \"btn btn-dark btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"recaptcha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(\"font\", {\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    id: \"label2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 34\n    }\n  }, \" \")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default OwnerLogin;","map":{"version":3,"sources":["C:/Users/abhin/remixclient/src/components/ownerLogin/OwnerLogin.js"],"names":["React","useState","Web3","ContractABI","firebase","web3","providers","HttpProvider","eth","defaultAccount","accounts","RemixContract","Contract","OwnerLogin","PAN","_setPAN","PANError","validate","e","regex","matchArray","match","document","getElementById","innerHTML","setData","preventDefault","isValid","getAccounts","account","gas","methods","getIndexFromPAN","estimateGas","result","send","from","x","LotOwnerLoginmessage","call","toString","gas2","makeLotOwnerLoginmessageNULL","index","LotOwnerLoginindex","gas1","getOwnerMobileFromIndex","result1","mobile","LotOwnerLoginmobile","alert","name","getOwnerNameFromIndex","slots","getOwnerslotsFromIndex","price","getOwnersPriceFromIndex","distance","getOwnersDistanceFromIndex","rating","getOwnersSecurityFromIndex","balance","getOwnersBalanceFromIndex","phone","getOwnersMobileFromIndex","recaptcha","auth","RecaptchaVerifier","number","gas4","makeLotOwnerLoginindexNULL","gas5","makeLotOwnerLoginmobileNULL","signInWithPhoneNumber","then","code","prompt","window","location","reload","confirm","console","log","user","replace","catch","error","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Web3 from \"web3\";\nimport { ContractABI } from \"../../ContractABI\";\nimport firebase from '../../firebase'\nimport './OwnerLogin.css'\n\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\n\nconst RemixContract = new web3.eth.Contract(\n  ContractABI,\n  \"0xfbC8234649887617be2Cdf552a444193eE010A3c\"\n);\n\n\nfunction OwnerLogin() {\n  const [PAN,_setPAN]= useState(\"\");\n  var PANError=\"\";\n  const validate = async e =>{\n    if (!PAN) \n    {\n      PANError = \"pan cannot be blank\";\n    }\n    else if (PAN!== \"\") \n    {\n      var regex = /([A-Z]){5}([0-9]){4}([A-Z]){1}$/;\n      var matchArray = PAN.match(regex);\n      if (matchArray == null) {\n          PANError=\"pan number is not valid\";\n      }\n    }\n    document.getElementById('label1').innerHTML = PANError;\n    if (PANError) {\n      //alert(\"in\")\n        return false;\n    }\n    //alert(\"out\")\n    return true;\n  }\n  const setData = async e => {\n    e.preventDefault();\n    const isValid = await validate();\n    if (isValid)\n    {\n      const accounts=await web3.eth.getAccounts();\n      const account = accounts[0];\n      const gas = await RemixContract.methods.getIndexFromPAN(PAN).estimateGas();\n      const result = await RemixContract.methods\n      .getIndexFromPAN(PAN)\n      .send({ from: account, gas });\n      var x=  (await RemixContract.methods.LotOwnerLoginmessage().call()).toString();\n      if(x==\"Does not exists.\")\n      {\n        const gas2 = await RemixContract.methods.makeLotOwnerLoginmessageNULL().estimateGas();\n        await RemixContract.methods.makeLotOwnerLoginmessageNULL().send({ from: account, gas2 });\n      }\n      else\n      {\n      var index=  (await RemixContract.methods.LotOwnerLoginindex().call()).toString();\n      //alert(index)\n      const gas1 = await RemixContract.methods.getOwnerMobileFromIndex(index).estimateGas();\n      const result1 = await RemixContract.methods\n      .getOwnerMobileFromIndex(index)\n      .send({ from: account, gas1 });\n      var mobile=  (await RemixContract.methods.LotOwnerLoginmobile().call()).toString();\n      alert(mobile);\n      var name= (await RemixContract.methods.getOwnerNameFromIndex(index).call()).toString();\n      //alert(name);\n      var slots= (await RemixContract.methods.getOwnerslotsFromIndex(index).call()).toString();\n      //alert(slots);\n      var price= (await RemixContract.methods.getOwnersPriceFromIndex(index).call()).toString();\n      //alert(price);\n      var distance= (await RemixContract.methods.getOwnersDistanceFromIndex(index).call()).toString();\n      //alert(distance);\n      var rating= (await RemixContract.methods.getOwnersSecurityFromIndex(index).call()).toString();\n      //alert(rating);\n      var balance= (await RemixContract.methods.getOwnersBalanceFromIndex(index).call()).toString();\n      //alert(balance);\n      var phone=(await RemixContract.methods.getOwnersMobileFromIndex(index).call()).toString();\n      //alert(phone)\n      var recaptcha = new firebase.auth.RecaptchaVerifier('recaptcha');\n      var number = '+91'+mobile;\n      //alert(number)\n      const gas2 = await RemixContract.methods.makeLotOwnerLoginmessageNULL().estimateGas();\n      await RemixContract.methods.makeLotOwnerLoginmessageNULL().send({ from: account, gas2 });\n      const gas4 = await RemixContract.methods.makeLotOwnerLoginindexNULL().estimateGas();\n      await RemixContract.methods.makeLotOwnerLoginindexNULL().send({ from: account, gas4 });\n      const gas5 = await RemixContract.methods.makeLotOwnerLoginmobileNULL().estimateGas();\n      await RemixContract.methods.makeLotOwnerLoginmobileNULL().send({ from: account, gas5 });\n      //window.location.replace(\"/Owneracc/\"+PAN+\"/\"+name+\"/\"+slots+\"/\"+price+\"/\"+distance+\"/\"+rating+\"/\"+balance+\"/\"+phone);\n      await firebase.auth().signInWithPhoneNumber(number, recaptcha).then( function(e) {\n      var code = prompt('Enter the otp', '');\n      if(code === null) \n      {\n        document.getElementById('label2').innerHTML = \"NULL OTP\";\n        window.location.reload();\n      }\n       \n       e.confirm(code).then(function (result) {\n           console.log(result.user);\n           document.getElementById('label2').innerHTML = \"Number verified\";\n           window.location.replace(\"/Owneracc/\"+PAN+\"/\"+name+\"/\"+slots+\"/\"+price+\"/\"+distance+\"/\"+rating+\"/\"+balance+\"/\"+phone);\n       }).catch(function (error) {\n        document.getElementById('label2').innerHTML = \"Wrong OTP Entered\";\n           console.error( error);\n           window.location.reload();\n       });\n \n        })\n        .catch(function (error) {\n        document.getElementById('label2').innerHTML = \"Too many requests for Firebase OTP Verification\";\n        console.error( error);\n        window.location.reload();\n   });\n      }\n    }\n\n  }\n  return (\n    <div>\n\n        <div class=\"card\" >\n          <div class=\"card-body\" id=\"mainc\">\n            <br/>\n            <div className=\"card\" id=\"icard\">\n              <br/>  \n              <img className=\"logo\" src=\"/img/car-parking.png\" alt=\"Card image cap\"/>\n              <br/>\n              <div class=\"card-body\">\n                <form onSubmit={setData}>\n                  <div class=\"form-group\">\n                    <label>PAN\n                    <input type=\"text\" class=\"form-control\" id=\"mobile\" name=\"PAN\" value={PAN} placeholder= \"PAN card number\" onChange={e => _setPAN(e.target.value)}/>\n                    </label>\n                    <font color=\"red\"><label id='label1'> </label></font>\n                    <br></br>\n                    <small id=\"mobileHelp\" class=\"form-text text-muted\">We'll never share your number with anyone else.</small>\n                  </div>\n                  <input type=\"submit\" value=\"Login\" class=\"btn btn-dark btn-block\"/>\n               </form>\n               <div id=\"recaptcha\"></div>\n               <font color=\"red\"><label id='label2'> </label></font>\n              </div>\n            </div>\n            <br/>\n            <br/>\n          </div>\n        </div>\n\n    </div>\n  );\n}\n\nexport default OwnerLogin\n"]},"metadata":{},"sourceType":"module"}