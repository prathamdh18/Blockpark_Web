{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhin\\\\remixclient\\\\src\\\\components\\\\driverAcc\\\\DriverAcc.js\";\nimport React, { useState } from 'react';\nimport moment from \"moment\";\nimport './DriverAcc.css';\nimport Web3 from \"web3\";\nimport { ContractABI } from \"../../ContractABI\";\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\nconst RemixContract = new web3.eth.Contract(ContractABI, \"0xf4174c6E0c0d94BA2B623f6cCf877D6a06A7F994\");\n\nfunction DriverAcc() {\n  var ExitTime;\n\n  const setData = async e => {\n    e.preventDefault();\n    var temp = window.location.href;\n    var res = temp.split('/');\n    var index = res[4];\n    var cnum = res[5];\n    cnum = cnum[0] + cnum[1] + \" \" + cnum[5] + cnum[6] + \" \" + cnum[10] + cnum[11] + \" \" + cnum[15] + cnum[16] + cnum[17] + cnum[18];\n    var now = new moment();\n    ExitTime = now.format(\"HH:mm:ss\");\n    alert(ExitTime);\n    const accounts = await web3.eth.getAccounts();\n    const account = accounts[0];\n    var EnterTime = (await RemixContract.methods.getDriverEnterTimeFromIndex(index).call()).toString();\n    alert(EnterTime);\n    var ms = moment(ExitTime, \"HH:mm:ss\").diff(moment(EnterTime, \"HH:mm:ss\"));\n    var hours = ms / (1000 * 60 * 60) % 24;\n    hours = Math.ceil(hours);\n    alert(hours);\n    var ParkedPrice = (await RemixContract.methods.getDriverParkedPriceFromIndex(index).call()).toString();\n    alert(ParkedPrice);\n    var Gender = (await RemixContract.methods.getDriverGenderFromIndex(index).call()).toString();\n    alert(Gender);\n    var age = (await RemixContract.methods.getDriverAgeFromIndex(index).call()).toString();\n    alert(age);\n    var BaseTotal = hours * ParkedPrice;\n    var GenderDiscount = 0;\n\n    if (Gender == \"Female\") {\n      GenderDiscount = 0.15;\n    }\n\n    var AgeDiscount = 0;\n\n    if (age >= 60) {\n      AgeDiscount = 0.15;\n    }\n\n    var EarlyBirdDiscount = 0;\n    var LateRiserCess = 0;\n    var EnterTimeHour = parseInt(EnterTime[0] + EnterTime[1]);\n\n    if (EnterTimeHour >= 8 && EnterTimeHour <= 12) {\n      EarlyBirdDiscount = 0.1;\n    }\n\n    if (EnterTimeHour >= 20 && EnterTimeHour <= 23) {\n      LateRiserCess = 0.2;\n    }\n\n    BaseTotal = BaseTotal + BaseTotal * (-GenderDiscount - AgeDiscount - EarlyBirdDiscount + LateRiserCess);\n    alert(BaseTotal);\n    const gas = await RemixContract.methods.CarWithdrawlFromIndex(index, BaseTotal).estimateGas();\n    const result = await RemixContract.methods.CarWithdrawlFromIndex(index, BaseTotal).send({\n      from: account,\n      gas\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    id: \"maind\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 43\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    id: \"dacard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"logo\",\n    src: \"/img/parking.png\",\n    alt: \"Card image cap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 80\n    }\n  }, \"BlockPark: Your Ultimate Parking Solution\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 130\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Hey, Thank you for parking with us. \"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: setData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"WITHDRAW CAR AND MAKE PAYMENT\",\n    class: \"btn btn-danger btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 33\n    }\n  }))))))));\n}\n\nexport default DriverAcc;","map":{"version":3,"sources":["C:/Users/abhin/remixclient/src/components/driverAcc/DriverAcc.js"],"names":["React","useState","moment","Web3","ContractABI","web3","providers","HttpProvider","eth","defaultAccount","accounts","RemixContract","Contract","DriverAcc","ExitTime","setData","e","preventDefault","temp","window","location","href","res","split","index","cnum","now","format","alert","getAccounts","account","EnterTime","methods","getDriverEnterTimeFromIndex","call","toString","ms","diff","hours","Math","ceil","ParkedPrice","getDriverParkedPriceFromIndex","Gender","getDriverGenderFromIndex","age","getDriverAgeFromIndex","BaseTotal","GenderDiscount","AgeDiscount","EarlyBirdDiscount","LateRiserCess","EnterTimeHour","parseInt","gas","CarWithdrawlFromIndex","estimateGas","result","send","from"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport moment from \"moment\";\nimport './DriverAcc.css'\nimport Web3 from \"web3\";\nimport { ContractABI } from \"../../ContractABI\";\n\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\n\nconst RemixContract = new web3.eth.Contract(\n  ContractABI,\n  \"0xf4174c6E0c0d94BA2B623f6cCf877D6a06A7F994\"\n);\n\n\nfunction DriverAcc() {\n  var ExitTime;\n  const setData = async e => {\n    e.preventDefault();\n    var temp=window.location.href;\n    var res=temp.split('/');\n    var index=res[4];\n    var cnum=res[5];\n    cnum=cnum[0]+cnum[1]+\" \"+cnum[5]+cnum[6]+\" \"+cnum[10]+cnum[11]+\" \"+cnum[15]+cnum[16]+cnum[17]+cnum[18];\n    var now = new moment();\n    ExitTime= now.format(\"HH:mm:ss\");\n    alert(ExitTime);\n    const accounts=await web3.eth.getAccounts();\n    const account = accounts[0];\n    var EnterTime=  (await RemixContract.methods.getDriverEnterTimeFromIndex(index).call()).toString();\n    alert(EnterTime);\n    var ms = moment(ExitTime,\"HH:mm:ss\").diff(moment(EnterTime,\"HH:mm:ss\"));\n    var hours   = ((ms / (1000*60*60)) % 24);\n    hours=Math.ceil(hours);\n    alert(hours);\n    var ParkedPrice=(await RemixContract.methods.getDriverParkedPriceFromIndex(index).call()).toString();\n    alert(ParkedPrice);\n    var Gender=(await RemixContract.methods.getDriverGenderFromIndex(index).call()).toString();\n    alert(Gender);\n    var age=(await RemixContract.methods.getDriverAgeFromIndex(index).call()).toString();\n    alert(age);\n    var BaseTotal=hours*ParkedPrice;\n    var GenderDiscount=0;\n    if(Gender==\"Female\")\n    {\n      GenderDiscount=0.15;\n    }\n    var AgeDiscount=0;\n    if(age>=60)\n    {\n      AgeDiscount=0.15;\n    }\n    var EarlyBirdDiscount=0;\n    var LateRiserCess=0;\n    var EnterTimeHour=parseInt(EnterTime[0]+EnterTime[1]);\n    if(EnterTimeHour>=8 && EnterTimeHour<=12)\n    {\n      EarlyBirdDiscount=0.1;\n    }\n    if(EnterTimeHour>=20 && EnterTimeHour<=23)\n    {\n      LateRiserCess=0.2;\n    }\n    BaseTotal=BaseTotal+BaseTotal*(-GenderDiscount-AgeDiscount-EarlyBirdDiscount+LateRiserCess);\n    alert(BaseTotal);\n    const gas = await RemixContract.methods.CarWithdrawlFromIndex(index,BaseTotal).estimateGas();\n    const result = await RemixContract.methods\n    .CarWithdrawlFromIndex(index,BaseTotal)\n    .send({ from: account, gas });\n  }; \n\n  return (\n    <div>\n      <div class=\"card\" >\n        <div class=\"card-body\" id=\"maind\"><br/>\n          <div className=\"card\" id=\"dacard\"><br/>  \n            <img className=\"logo\" src=\"/img/parking.png\" alt=\"Card image cap\"/><h1>BlockPark: Your Ultimate Parking Solution</h1><br/>\n            \n              <div class=\"card-body\">\n                <h2>Hey, Thank you for parking with us. </h2>\n                <form onSubmit={setData}>\n                  <div>\n                      <br/><br/><br/>\n                      <input type=\"submit\" value=\"WITHDRAW CAR AND MAKE PAYMENT\" class=\"btn btn-danger btn-block\"/>\n                      <br/><br/><br/>\n                  </div>\n                  </form>\n              </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DriverAcc\n"]},"metadata":{},"sourceType":"module"}